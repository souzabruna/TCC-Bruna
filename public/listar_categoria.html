<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
   <link rel="stylesheet" type="text/css" href="modal.css">
  
  <link rel="stylesheet" type="text/css" href="StyleSheets/home.css">
  <link rel="stylesheet" type="text/css" href="StyleSheets/buttons.css">
  <link rel="stylesheet" type="text/css" href="StyleSheets/sections.css">
  <link rel="stylesheet" type="text/css" href="StyleSheets/form.css">
  <link rel="stylesheet" type="text/css" href="StyleSheets/boxes.css">
  <link rel="stylesheet" type="text/css" href="StyleSheets/navbar.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="StyleSheets/utilites.css">
  <link href="https://fonts.googleapis.com/css?family=ABeeZee" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Arvo" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Great+Vibes" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Dekko" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.3.4/vue.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vue-resource/1.3.4/vue-resource.min.js"></script>
</head>
<body>

  <div class="NavbarDashboard">
    <div class="BoxLogo">
      <div class="BoxImage">
        
      </div>
      
    </div>

<input type="checkbox" id="check">
    <label id="icone" for="check"><i class="material-icons" style="color: white; font-size: 2em;">menu</i></label>
    
    <ul class="NavBox">
      <li class="DivLink"><a href="dashboard.html"> <i class="material-icons">home</i> Início</a></li>
      <li class="DivLink"> <i class="material-icons">add_shopping_cart</i> Vendas</li>
      <a class="DivLink" href="cadastro_cliente.html"> <i class="material-icons">person_add</i>Cadastros</a>
      <li class="DivLink"><i class="material-icons">settings</i>Configurações</li>
      <li class="DivLink"> <i class="material-icons">business_center</i>Consignado</li>
      
    </ul>
    
  </div>
  <section class="sale">
<div class="SectionProducts">
           <div class="Product" id="CardProduct">
            <div class="ProductItem code">  Código: <span></span></div>
            <div class="ProductItem name">  Nome: <span></span></div>
            <div class="BoxButtonProduct">
              <div class="buttonXSmall BtnEdit">Editar</div>
              <div class="buttonXSmall BtnDelete">Excluir</div>
            </div>
          </div>
        </div>
      </div>
</section>
</body>
<script>
$(document).ready(function(){
    $("#CardProduct").hide();
    $.ajax({
      type: "GET",
      dataType: "json",
      url: "/api/categoria/"
    }).done(function(data){
        console.log(data);
        $.each(data,function(index, obj){
            $('#CardProduct').clone().appendTo('.SectionProducts');
            var divProduct = $('#CardProduct').last();
            divProduct.attr('id',obj['code']);
            divProduct.find('.name span').html(obj['name']);
            divProduct.show();
        });//FIM DO AJAX

        $('.BtnDelete').click(function(){
            var code = $(this).parents('.Product').attr('id');
            var div = $(this).parents('.Product');
            $.ajax({
              type: "DELETE",
              dataType: "text",
              url: "/api/categoria/"+code
            }).done(function(data){
                console.log(data); //data é a resposta 
                if(data === "Deletado com sucesso!"){
                  console.log("cheguei");
                  alert(data);
                    div.hide();
                }
                });//FIM DO AJAX

        });
        
        $('.BtnEdit').click(function(){
             var code = $(this).parents('.Product').attr('id');
             var name = $(this).parents('.Product').find('.name span').html();
             window.location.assign("http://localhost:3000/public/atualizar_categoria.html?code="+code+"&name="+name);



        });
    });


  });

</script>

</html>

<!-- /api/product/new/:code/:name/:price/:description -->
